{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { shallowEqual } from 'rsuite-utils/lib/utils';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE, PLACEMENT } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, withPickerMethods } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldDisplay, shouldShowNodeByExpanded, flattenTree, getNodeParents, getVirtualLisHeight, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState } from '../utils/treeUtils'; // default value for virtualized\n\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var _this$state2 = this.state,\n        searchKeyword = _this$state2.searchKeyword,\n        expandItemValues = _this$state2.expandItemValues;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue(),\n        expand: expandItemValues\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value,\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state3 = this.state,\n        filterData = _this$state3.filterData,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues)) {\n      this.flattenNodes(filterData);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state4 = this.state,\n        filterData = _this$state4.filterData,\n        selectedValues = _this$state4.selectedValues,\n        expandItemValues = _this$state4.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(filterData);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this2 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this2.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !this.nodes[nodeData.refKey].check;\n      nodeData.parentNode = this.nodes[nodeData.refKey].parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this3 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this3.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this4 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this4.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this5 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this5$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this5.nodes[refKey] = (_this5$nodes$refKey = {\n        layer: layer\n      }, _this5$nodes$refKey[labelKey] = node[labelKey], _this5$nodes$refKey[valueKey] = node[valueKey], _this5$nodes$refKey.expand = getExpandState(node, props || _this5.props), _this5$nodes$refKey.uncheckable = getUncheckableState(node, props || _this5.props), _this5$nodes$refKey.refKey = refKey, _this5$nodes$refKey);\n\n      if (parentNode) {\n        _this5.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this5.flattenNodes(node[childrenKey], props, refKey, _this5.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的values中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var parentNode = nodes[currentNode.parentNode.refKey];\n\n        if (currentNode[key]) {\n          if (!parentNode.checkAll) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps) {\n    var _this6 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this6.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this6.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this6.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this6.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this6.nodes[refKey][valueKey], value)) {\n                _this6.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this6.nodes[refKey][listKey] = expandAll;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this7 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this7.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledChecbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        _this$props10$height = _this$props10.height,\n        height = _this$props10$height === void 0 ? defaultHeight : _this$props10$height,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        virtualized = _this$props10.virtualized,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    var styles = virtualized ? _extends({\n      height: height\n    }, menuStyle) : menuStyle;\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this8 = this;\n\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var expand = node.expand,\n        visible = node.visible,\n        refKey = node.refKey;\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var expandALlState = node.expand;\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expandALlState && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this8.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state6 = this.state,\n        activeNode = _this$state6.activeNode,\n        expandAll = _this$state6.expandAll;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        expand = node.expand,\n        showNode = node.showNode;\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this9 = this,\n        _classNames3;\n\n    var _this$state7 = this.state,\n        filterData = _this$state7.filterData,\n        isSomeNodeHasChildren = _this$state7.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        _this$props13$classNa = _this$props13.className,\n        className = _this$props13$classNa === void 0 ? '' : _this$props13$classNa,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this9.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // 当未定义 height 且 设置了 virtualized 为 true，treeHeight 设置默认高度\n\n\n    var treeHeight = _isUndefined(height) && virtualized ? defaultHeight : height;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var styles = inline ? _extends({\n      height: treeHeight\n    }, style) : {};\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    var ListHeight = getVirtualLisHeight(inline, treeHeight);\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: styles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: ListHeight,\n      defaultWidth: treeWidth\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this9.listRef,\n        width: width || treeWidth,\n        height: height || ListHeight,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this9.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\"]);\n\n    var _this$state8 = this.state,\n        hasValue = _this$state8.hasValue,\n        selectedValues = _this$state8.selectedValues;\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValue);\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n\n    if (hasValue && selectedValues.length) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        prefix: this.addPrefix,\n        cascade: cascade,\n        locale: locale\n      });\n\n      if (renderValue) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExit: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = {\n  data: PropTypes.array,\n  open: PropTypes.bool,\n  block: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.array,\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  locale: PropTypes.object,\n  cascade: PropTypes.bool,\n  disabled: PropTypes.bool,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  className: PropTypes.string,\n  cleanable: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  searchable: PropTypes.bool,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  virtualized: PropTypes.bool,\n  classPrefix: PropTypes.string,\n  defaultOpen: PropTypes.bool,\n  childrenKey: PropTypes.string,\n  placeholder: PropTypes.node,\n  preventOverflow: PropTypes.bool,\n  defaultValue: PropTypes.array,\n  searchKeyword: PropTypes.string,\n  menuStyle: PropTypes.object,\n  menuClassName: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  toggleComponentClass: PropTypes.elementType,\n  onOpen: PropTypes.func,\n  onExit: PropTypes.func,\n  onEnter: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onSearch: PropTypes.func,\n  onChange: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  onClean: PropTypes.func,\n  onExited: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExiting: PropTypes.func,\n  onEntering: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func\n};\nCheckTreePicker.defaultProps = {\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  },\n  inline: false,\n  cascade: true,\n  valueKey: 'value',\n  labelKey: 'label',\n  cleanable: true,\n  countable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  searchable: true,\n  virtualized: false,\n  menuAutoWidth: true,\n  defaultValue: [],\n  childrenKey: 'children',\n  defaultExpandAll: false,\n  uncheckableItemValues: []\n};\npolyfill(CheckTreePicker);\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(CheckTreePicker);","map":{"version":3,"sources":["/home/akram/CreamyCreations/node_modules/rsuite/es/CheckTreePicker/CheckTreePicker.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNumber","_isString","_isEmpty","_isUndefined","_isArray","React","PropTypes","classNames","compose","List","AutoSizer","CellMeasurerCache","CellMeasurer","polyfill","shallowEqual","CheckTreeNode","CHECK_STATE","PLACEMENT","clone","defaultProps","prefix","defaultClassPrefix","getUnhandledProps","createChainedFunction","withPickerMethods","PickerToggle","getToggleWrapperClassName","onMenuKeyDown","MenuWrapper","SearchBar","SelectedElement","PickerToggleTrigger","createConcatChildrenFunction","isEveryChildChecked","isSomeChildChecked","isSomeNodeHasChildren","getSiblingNodeUncheckable","getEveryFisrtLevelNodeUncheckable","getUncheckableState","getFormattedTree","getDisabledState","compareArray","shouldDisplay","shouldShowNodeByExpanded","flattenTree","getNodeParents","getVirtualLisHeight","hasVisibleChildren","treeDeprecatedWarning","getExpandItemValues","getExpandAll","getExpandState","defaultHeight","defaultWidth","CheckTreePicker","_React$Component","_props","_this","call","menuRef","treeViewRef","positionRef","listRef","triggerRef","toggleRef","getValue","props","_props2","value","defaultValue","_props2$uncheckableIt","uncheckableItemValues","length","filter","v","includes","getElementByDataKey","dataKey","ele","nodeRefs","Element","querySelector","addTreePrefix","getFocusableMenuItems","filterData","state","childrenKey","items","loop","treeNodes","forEach","node","nodeData","nodes","refKey","visible","push","activeNode","cache","fixedWidth","minHeight","bindNodeRefs","ref","getPositionInstance","current","getToggleInstance","selectActiveItem","event","_this$getActiveItem","getActiveItem","handleSelect","focusNextItem","_node$focus","_this$getItemsAndActi","getItemsAndActiveIndex","activeIndex","nextIndex","focus","focusPreviousItem","_node$focus2","_this$getItemsAndActi2","prevIndex","handleCloseDropdown","hide","handleOpenDropdown","show","handleToggleDropdown","active","everyChildChecked","list","Object","keys","_curNode$parentNode","curNode","parentNode","uncheckable","every","l","check","addPrefix","name","classPrefix","_this$props","onChange","onSelect","selectedValues","toggleChecked","unserializeLists","setState","hasValue","handleToggle","_this$props2","valueKey","onExpand","expandItemValues","nextExpandItemValues","toggleExpand","expand","handleKeyDown","down","up","enter","del","handleClean","handleToggleKeyDown","_this$state","keyCode","target","HTMLElement","className","handleSearch","_this$props3","onSearch","searchKeyword","getFilterData","evnet","_this$props$onChange","_this$props4","handleOnOpen","_this$props$onOpen","_this$props5","_node$focus3","onOpen","handleOnClose","_this$props6","onClose","measureRowRenderer","_ref","key","index","style","parent","createElement","columnIndex","rowIndex","renderVirtualNode","_value","data","cascade","_childrenKey","_searchKeyword","nextValue","_nextExpandItemValues","nextData","concat","flattenNodes","expandAll","serializeList","createRef","getDerivedStateFromProps","nextProps","prevState","nextState","_proto","prototype","componentDidUpdate","_prevProps","updateDataChange","updateValueChange","updateExpandItemValuesChange","updateUncheckableItemValuesChange","updateCascadeChange","updateSearchKeywordChange","forceUpdateGrid","_this$state2","_this$props7","_this$props7$data","_this$state3","_this$state4","getNodeCheckState","checkAll","CHECK","UNCHECK","INDETERMINATE","_props3","labelKey","setVisible","item","child","getActiveElementOption","options","i","_options$i$childrenKe","getFlattenTreeData","_this2","_this$props8","formatted","parentKeys","layer","showNode","document","activeElement","getAttribute","activeItem","_activeItem$dataset","_activeItem$dataset2","dataset","getSelectedItems","_this3","checkItems","map","some","values","_this4","_this5","_ref2","Array","isArray","_this5$nodes$refKey","filterSelectedValues","_this$props$uncheckab","serializeListOnlyParent","currentNode","lists","_this6","_nextProps","_nextProps$uncheckabl","listKey","uncheckableValue","isChecked","toggleDownChecked","toggleUpChecked","checked","_this7","_this$props9","toggleNode","toggleValue","isExpand","Set","add","delete","from","renderDropdownMenu","_this$props10","_this$props10$height","height","locale","menuStyle","searchable","renderMenu","virtualized","renderExtraFooter","menuClassName","menuAutoWidth","keyword","classes","menu","renderCheckTree","styles","autoWidth","placeholder","searchPlaceholder","renderNode","_this8","_this$state5","_this$props11","renderTreeNode","renderTreeIcon","children","visibleChildren","label","rtl","disabled","checkState","hasChildren","allUncheckable","onTreeToggle","onRenderTreeNode","onRenderTreeIcon","_classNames","openClass","expandALlState","childrenClass","bind","innerRef","_this$state6","_this$props12","_classNames2","_this9","_classNames3","_this$state7","_this$props13","inline","_this$props13$classNa","onScroll","formattedNodes","noResultsText","n","treeHeight","treeWidth","width","treeNodesClass","ListHeight","onKeyDown","_ref3","rowHeight","rowCount","rowRenderer","render","_this$props14","cleanable","countable","toggleComponentClass","onExited","onEntered","onClean","renderValue","rest","_this$state8","selectedItems","selectedElement","unhandled","pickerProps","onExit","speaker","componentClass","Component","propTypes","array","open","bool","block","object","number","string","container","oneOfType","func","placement","oneOf","appearance","defaultOpen","preventOverflow","defaultExpandAll","containerPadding","disabledItemValues","defaultExpandItemValues","elementType","onEnter","onHide","onExiting","onEntering","enhance"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { shallowEqual } from 'rsuite-utils/lib/utils';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE, PLACEMENT } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, withPickerMethods } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldDisplay, shouldShowNodeByExpanded, flattenTree, getNodeParents, getVirtualLisHeight, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState } from '../utils/treeUtils';\n// default value for virtualized\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var _this$state2 = this.state,\n        searchKeyword = _this$state2.searchKeyword,\n        expandItemValues = _this$state2.expandItemValues;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue(),\n        expand: expandItemValues\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value,\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state3 = this.state,\n        filterData = _this$state3.filterData,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues)) {\n      this.flattenNodes(filterData);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state4 = this.state,\n        filterData = _this$state4.filterData,\n        selectedValues = _this$state4.selectedValues,\n        expandItemValues = _this$state4.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(filterData);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this2 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this2.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !this.nodes[nodeData.refKey].check;\n      nodeData.parentNode = this.nodes[nodeData.refKey].parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this3 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this3.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this4 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this4.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this5 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this5$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this5.nodes[refKey] = (_this5$nodes$refKey = {\n        layer: layer\n      }, _this5$nodes$refKey[labelKey] = node[labelKey], _this5$nodes$refKey[valueKey] = node[valueKey], _this5$nodes$refKey.expand = getExpandState(node, props || _this5.props), _this5$nodes$refKey.uncheckable = getUncheckableState(node, props || _this5.props), _this5$nodes$refKey.refKey = refKey, _this5$nodes$refKey);\n\n      if (parentNode) {\n        _this5.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this5.flattenNodes(node[childrenKey], props, refKey, _this5.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的values中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var parentNode = nodes[currentNode.parentNode.refKey];\n\n        if (currentNode[key]) {\n          if (!parentNode.checkAll) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps) {\n    var _this6 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this6.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this6.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this6.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this6.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this6.nodes[refKey][valueKey], value)) {\n                _this6.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this6.nodes[refKey][listKey] = expandAll;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this7 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this7.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledChecbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        _this$props10$height = _this$props10.height,\n        height = _this$props10$height === void 0 ? defaultHeight : _this$props10$height,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        virtualized = _this$props10.virtualized,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    var styles = virtualized ? _extends({\n      height: height\n    }, menuStyle) : menuStyle;\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this8 = this;\n\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var expand = node.expand,\n        visible = node.visible,\n        refKey = node.refKey;\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var expandALlState = node.expand;\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expandALlState && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this8.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state6 = this.state,\n        activeNode = _this$state6.activeNode,\n        expandAll = _this$state6.expandAll;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        expand = node.expand,\n        showNode = node.showNode;\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this9 = this,\n        _classNames3;\n\n    var _this$state7 = this.state,\n        filterData = _this$state7.filterData,\n        isSomeNodeHasChildren = _this$state7.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        _this$props13$classNa = _this$props13.className,\n        className = _this$props13$classNa === void 0 ? '' : _this$props13$classNa,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this9.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // 当未定义 height 且 设置了 virtualized 为 true，treeHeight 设置默认高度\n\n\n    var treeHeight = _isUndefined(height) && virtualized ? defaultHeight : height;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var styles = inline ? _extends({\n      height: treeHeight\n    }, style) : {};\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    var ListHeight = getVirtualLisHeight(inline, treeHeight);\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: styles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: ListHeight,\n      defaultWidth: treeWidth\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this9.listRef,\n        width: width || treeWidth,\n        height: height || ListHeight,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this9.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\"]);\n\n    var _this$state8 = this.state,\n        hasValue = _this$state8.hasValue,\n        selectedValues = _this$state8.selectedValues;\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValue);\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n\n    if (hasValue && selectedValues.length) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        prefix: this.addPrefix,\n        cascade: cascade,\n        locale: locale\n      });\n\n      if (renderValue) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExit: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = {\n  data: PropTypes.array,\n  open: PropTypes.bool,\n  block: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.array,\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  locale: PropTypes.object,\n  cascade: PropTypes.bool,\n  disabled: PropTypes.bool,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  className: PropTypes.string,\n  cleanable: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  searchable: PropTypes.bool,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  virtualized: PropTypes.bool,\n  classPrefix: PropTypes.string,\n  defaultOpen: PropTypes.bool,\n  childrenKey: PropTypes.string,\n  placeholder: PropTypes.node,\n  preventOverflow: PropTypes.bool,\n  defaultValue: PropTypes.array,\n  searchKeyword: PropTypes.string,\n  menuStyle: PropTypes.object,\n  menuClassName: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  toggleComponentClass: PropTypes.elementType,\n  onOpen: PropTypes.func,\n  onExit: PropTypes.func,\n  onEnter: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onSearch: PropTypes.func,\n  onChange: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  onClean: PropTypes.func,\n  onExited: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExiting: PropTypes.func,\n  onEntering: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func\n};\nCheckTreePicker.defaultProps = {\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  },\n  inline: false,\n  cascade: true,\n  valueKey: 'value',\n  labelKey: 'label',\n  cleanable: true,\n  countable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  searchable: true,\n  virtualized: false,\n  menuAutoWidth: true,\n  defaultValue: [],\n  childrenKey: 'children',\n  defaultExpandAll: false,\n  uncheckableItemValues: []\n};\npolyfill(CheckTreePicker);\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(CheckTreePicker);"]},"metadata":{},"sourceType":"module"}