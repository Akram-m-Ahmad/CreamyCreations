{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _remove from \"lodash/remove\";\nimport _trim from \"lodash/trim\";\nimport _clone from \"lodash/clone\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _get from \"lodash/get\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport { getWidth } from 'dom-lib';\nimport { reactToString, filterNodesOfTree, findNodeOfTree, shallowEqual } from 'rsuite-utils/lib/utils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, tplTransform, getDataGroupBy, withPickerMethods } from '../utils';\nimport { DropdownMenuItem, DropdownMenuCheckItem, getToggleWrapperClassName, onMenuKeyDown, PickerToggle, MenuWrapper, PickerToggleTrigger } from '../Picker';\nimport DropdownMenu, { dropdownMenuPropTypes } from '../Picker/DropdownMenu';\nimport InputAutosize from './InputAutosize';\nimport InputSearch from './InputSearch';\nimport Tag from '../Tag';\nimport { PLACEMENT } from '../constants';\n\nvar InputPicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InputPicker, _React$Component);\n\n  InputPicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.data && !shallowEqual(nextProps.data, prevState.data)) {\n      return {\n        data: nextProps.data,\n        focusItemValue: _get(nextProps, \"data.0.\" + nextProps.valueKey)\n      };\n    }\n\n    return null;\n  };\n\n  function InputPicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.positionRef = void 0;\n    _this.toggleWrapperRef = void 0;\n    _this.toggleRef = void 0;\n    _this.triggerRef = void 0;\n    _this.inputRef = void 0;\n\n    _this.getFocusableMenuItems = function () {\n      var labelKey = _this.props.labelKey;\n      var menuItems = _this.menuContainerRef.current.menuItems;\n\n      if (!menuItems) {\n        return [];\n      }\n\n      var items = Object.values(menuItems).map(function (item) {\n        return item.props.getItemData();\n      });\n      return filterNodesOfTree(items, function (item) {\n        return _this.shouldDisplay(item[labelKey]);\n      });\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.focusNextMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index + 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.focusPrevMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index - 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (!_this.menuContainerRef.current) {\n        return;\n      }\n\n      var multi = _this.props.multi;\n      onMenuKeyDown(event, {\n        down: _this.focusNextMenuItem,\n        up: _this.focusPrevMenuItem,\n        enter: multi ? _this.selectFocusMenuCheckItem : _this.selectFocusMenuItem,\n        esc: _this.handleCloseDropdown,\n        del: multi ? _this.removeLastItem : _this.handleClean\n      });\n    };\n\n    _this.handleClick = function () {\n      _this.focusInput();\n    };\n\n    _this.selectFocusMenuItem = function (event) {\n      var _this$state = _this.state,\n          focusItemValue = _this$state.focusItemValue,\n          searchKeyword = _this$state.searchKeyword;\n      var _this$props = _this.props,\n          valueKey = _this$props.valueKey,\n          data = _this$props.data,\n          disabledItemValues = _this$props.disabledItemValues;\n\n      if (!focusItemValue || !data) {\n        return;\n      } // If the value is disabled in this option, it is returned.\n\n\n      if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n        return item === focusItemValue;\n      })) {\n        return;\n      } // Find active `MenuItem` by `value`\n\n\n      var focusItem = findNodeOfTree(_this.getAllData(), function (item) {\n        return shallowEqual(item[valueKey], focusItemValue);\n      });\n\n      if (!focusItem && focusItemValue === searchKeyword) {\n        focusItem = _this.createOption(searchKeyword);\n      }\n\n      _this.setState({\n        value: focusItemValue,\n        searchKeyword: ''\n      });\n\n      _this.handleSelect(focusItemValue, focusItem, event);\n\n      _this.handleChange(focusItemValue, event);\n\n      _this.handleCloseDropdown();\n    };\n\n    _this.selectFocusMenuCheckItem = function (event) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          disabledItemValues = _this$props2.disabledItemValues;\n      var focusItemValue = _this.state.focusItemValue;\n\n      var value = _this.getValue();\n\n      var data = _this.getAllData();\n\n      if (!focusItemValue || !data) {\n        return;\n      } // If the value is disabled in this option, it is returned.\n\n\n      if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n        return item === focusItemValue;\n      })) {\n        return;\n      }\n\n      if (!value.some(function (v) {\n        return shallowEqual(v, focusItemValue);\n      })) {\n        value.push(focusItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, focusItemValue);\n        });\n      }\n\n      var focusItem = data.find(function (item) {\n        return shallowEqual(_get(item, valueKey), focusItemValue);\n      });\n\n      if (!focusItem) {\n        focusItem = _this.createOption(focusItemValue);\n      }\n\n      _this.setState({\n        value: value,\n        searchKeyword: ''\n      }, _this.updatePosition);\n\n      _this.handleSelect(value, focusItem, event);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.handleItemSelect = function (value, item, event) {\n      var nextState = {\n        value: value,\n        focusItemValue: value,\n        searchKeyword: ''\n      };\n\n      _this.setState(nextState);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChange(value, event);\n\n      _this.handleCloseDropdown();\n    };\n\n    _this.handleCheckItemSelect = function (nextItemValue, item, event, checked) {\n      var value = _this.getValue();\n\n      if (checked) {\n        value.push(nextItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, nextItemValue);\n        });\n      }\n\n      var nextState = {\n        value: value,\n        searchKeyword: '',\n        focusItemValue: nextItemValue\n      };\n\n      _this.setState(nextState, _this.updatePosition);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChange(value, event);\n\n      _this.focusInput();\n    };\n\n    _this.handleSelect = function (value, item, event) {\n      var _this$props3 = _this.props,\n          onSelect = _this$props3.onSelect,\n          creatable = _this$props3.creatable;\n      var newData = _this.state.newData;\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, item, event);\n\n      if (creatable && item.create) {\n        delete item.create;\n\n        _this.setState({\n          newData: newData.concat(item)\n        });\n      }\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props4 = _this.props,\n          onSearch = _this$props4.onSearch,\n          labelKey = _this$props4.labelKey,\n          valueKey = _this$props4.valueKey;\n      var filteredData = filterNodesOfTree(_this.getAllData(), function (item) {\n        return _this.shouldDisplay(item[labelKey], searchKeyword);\n      });\n      var nextState = {\n        searchKeyword: searchKeyword,\n        focusItemValue: filteredData.length ? filteredData[0][valueKey] : searchKeyword\n      };\n\n      _this.setState(nextState, _this.updatePosition);\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleChange = function (value, event) {\n      var _this$props$onChange, _this$props5;\n\n      (_this$props$onChange = (_this$props5 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props5, value, event);\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props6 = _this.props,\n          disabled = _this$props6.disabled,\n          onClean = _this$props6.onClean;\n      var searchKeyword = _this.state.searchKeyword;\n\n      if (disabled || searchKeyword !== '') {\n        return;\n      }\n\n      var nextState = {\n        value: null,\n        focusItemValue: null,\n        searchKeyword: ''\n      };\n\n      _this.setState(nextState);\n\n      _this.handleChange(null, event);\n\n      _this.updatePosition();\n\n      onClean === null || onClean === void 0 ? void 0 : onClean(event);\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props7;\n\n      (_this$props$onOpen = (_this$props7 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props7);\n    };\n\n    _this.handleExited = function () {\n      var _this$props8 = _this.props,\n          onClose = _this$props8.onClose,\n          multi = _this$props8.multi;\n\n      var value = _this.getValue();\n\n      var nextState = {\n        focusItemValue: multi ? _get(value, 0) : value\n      };\n\n      if (multi) {\n        /**\n         在多选的情况下, 当 searchKeyword 过长，在 focus 的时候会导致内容换行。\n         把 searchKeyword 清空是为了，Menu 在展开时候位置正确。\n         */\n        nextState.searchKeyword = '';\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState(nextState);\n    };\n\n    _this.handleEnter = function () {\n      _this.focusInput();\n\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleExit = function () {\n      _this.blurInput();\n\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handleRemoveItemByTag = function (tag, event) {\n      event.stopPropagation();\n\n      var value = _this.getValue();\n\n      _remove(value, function (itemVal) {\n        return shallowEqual(itemVal, tag);\n      });\n\n      _this.setState({\n        value: value\n      }, _this.updatePosition);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.removeLastItem = function (event) {\n      var tagName = _get(event, 'target.tagName');\n\n      if (tagName !== 'INPUT') {\n        _this.focusInput();\n\n        return;\n      }\n\n      if (tagName === 'INPUT' && _get(event, 'target.value')) {\n        return;\n      }\n\n      var value = _this.getValue();\n\n      value.pop();\n\n      _this.setState({\n        value: value\n      }, _this.updatePosition);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderMenuItem = function (label, item) {\n      var _this$props9 = _this.props,\n          locale = _this$props9.locale,\n          renderMenuItem = _this$props9.renderMenuItem;\n      var newLabel = item.create ? React.createElement(\"span\", null, tplTransform(locale.createOption, label)) : label;\n      return renderMenuItem ? renderMenuItem(newLabel, item) : newLabel;\n    };\n\n    var defaultValue = props.defaultValue,\n        groupBy = props.groupBy,\n        _valueKey = props.valueKey,\n        _labelKey = props.labelKey,\n        defaultOpen = props.defaultOpen,\n        _multi = props.multi,\n        _data = props.data;\n\n    var _value = _multi ? defaultValue || [] : defaultValue;\n\n    var _focusItemValue = _multi ? _get(_value, 0) : defaultValue;\n\n    _this.state = {\n      data: _data,\n      value: _value,\n      focusItemValue: _focusItemValue,\n      searchKeyword: '',\n      newData: [],\n      open: defaultOpen,\n      maxWidth: 100\n    };\n\n    if (groupBy === _valueKey || groupBy === _labelKey) {\n      throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n    }\n\n    _this.menuContainerRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.toggleWrapperRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.inputRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = InputPicker.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.toggleWrapperRef.current) {\n      var maxWidth = getWidth(this.toggleWrapperRef.current);\n      this.setState({\n        maxWidth: maxWidth\n      });\n    }\n  };\n\n  _proto.getValue = function getValue() {\n    var _this$props10 = this.props,\n        value = _this$props10.value,\n        multi = _this$props10.multi;\n    var nextValue = _isUndefined(value) ? this.state.value : value;\n\n    if (multi) {\n      return _clone(nextValue) || [];\n    }\n\n    return nextValue;\n  };\n\n  _proto.getAllData = function getAllData() {\n    var data = this.props.data;\n    var newData = this.state.newData;\n    return [].concat(data, newData);\n  };\n\n  _proto.getAllDataAndCache = function getAllDataAndCache() {\n    var cacheData = this.props.cacheData;\n    var data = this.getAllData();\n    return [].concat(data, cacheData);\n  };\n\n  _proto.getLabelByValue = function getLabelByValue(value) {\n    var _this$props11 = this.props,\n        renderValue = _this$props11.renderValue,\n        placeholder = _this$props11.placeholder,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey; // Find active `MenuItem` by `value`\n\n    var activeItem = findNodeOfTree(this.getAllDataAndCache(), function (item) {\n      return shallowEqual(item[valueKey], value);\n    });\n    var displayElement = placeholder;\n\n    if (_get(activeItem, labelKey)) {\n      displayElement = _get(activeItem, labelKey);\n\n      if (renderValue) {\n        displayElement = renderValue(value, activeItem, displayElement);\n      }\n    }\n\n    return {\n      isValid: !!activeItem,\n      displayElement: displayElement\n    };\n  };\n\n  _proto.createOption = function createOption(value) {\n    var _ref2;\n\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        groupBy = _this$props12.groupBy,\n        locale = _this$props12.locale;\n\n    if (groupBy) {\n      var _ref;\n\n      return _ref = {\n        create: true\n      }, _ref[groupBy] = locale.newItem, _ref[valueKey] = value, _ref[labelKey] = value, _ref;\n    }\n\n    return _ref2 = {\n      create: true\n    }, _ref2[valueKey] = value, _ref2[labelKey] = value, _ref2;\n  };\n\n  _proto.focusInput = function focusInput() {\n    var input = this.getInput();\n    if (!input) return;\n    input.focus();\n  };\n\n  _proto.blurInput = function blurInput() {\n    var input = this.getInput();\n    if (!input) return;\n    input.blur();\n  };\n\n  _proto.getInput = function getInput() {\n    var multi = this.props.multi;\n\n    if (multi) {\n      return this.inputRef.current.getInputInstance();\n    }\n\n    return this.inputRef.current;\n  };\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  _proto.shouldDisplay = function shouldDisplay(label, searchKeyword) {\n    var word = typeof searchKeyword === 'undefined' ? this.state.searchKeyword : searchKeyword;\n\n    if (!_trim(word)) {\n      return true;\n    }\n\n    var keyword = word.toLocaleLowerCase();\n\n    if (typeof label === 'string' || typeof label === 'number') {\n      return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n    } else if (React.isValidElement(label)) {\n      var nodes = reactToString(label);\n      return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n    }\n\n    return false;\n  };\n\n  _proto.findNode = function findNode(focus) {\n    var items = this.getFocusableMenuItems();\n    var valueKey = this.props.valueKey;\n    var focusItemValue = this.state.focusItemValue;\n\n    for (var i = 0; i < items.length; i += 1) {\n      if (shallowEqual(focusItemValue, items[i][valueKey])) {\n        focus(items, i);\n        return;\n      }\n    }\n\n    focus(items, -1);\n  };\n\n  _proto.updatePosition = function updatePosition() {\n    if (this.positionRef.current) {\n      this.positionRef.current.updatePosition(true);\n    }\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this2 = this;\n\n    var _this$props13 = this.props,\n        labelKey = _this$props13.labelKey,\n        groupBy = _this$props13.groupBy,\n        locale = _this$props13.locale,\n        renderMenu = _this$props13.renderMenu,\n        renderExtraFooter = _this$props13.renderExtraFooter,\n        menuClassName = _this$props13.menuClassName,\n        menuStyle = _this$props13.menuStyle,\n        menuAutoWidth = _this$props13.menuAutoWidth,\n        creatable = _this$props13.creatable,\n        valueKey = _this$props13.valueKey,\n        multi = _this$props13.multi,\n        sort = _this$props13.sort,\n        virtualized = _this$props13.virtualized;\n    var _this$state2 = this.state,\n        focusItemValue = _this$state2.focusItemValue,\n        searchKeyword = _this$state2.searchKeyword;\n    var menuClassPrefix = this.addPrefix(multi ? 'check-menu' : 'select-menu');\n    var classes = classNames(menuClassPrefix, menuClassName);\n    var allData = this.getAllData();\n    var filteredData = filterNodesOfTree(allData, function (item) {\n      return _this2.shouldDisplay(item[labelKey]);\n    });\n\n    if (creatable && searchKeyword && !findNodeOfTree(allData, function (item) {\n      return item[valueKey] === searchKeyword;\n    })) {\n      filteredData = [].concat(filteredData, [this.createOption(searchKeyword)]);\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      filteredData = getDataGroupBy(filteredData, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      filteredData = filteredData.sort(sort(false));\n    }\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['className', 'style', 'classPrefix'])));\n\n    var value = this.getValue();\n    var menu = filteredData.length ? React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: menuClassPrefix,\n      dropdownMenuItemClassPrefix: multi ? undefined : menuClassPrefix + \"-item\",\n      dropdownMenuItemComponentClass: multi ? DropdownMenuCheckItem : DropdownMenuItem,\n      ref: this.menuContainerRef,\n      activeItemValues: multi ? value : [value],\n      focusItemValue: focusItemValue,\n      data: filteredData,\n      group: !_isUndefined(groupBy),\n      onSelect: multi ? this.handleCheckItemSelect : this.handleItemSelect,\n      renderMenuItem: this.renderMenuItem,\n      virtualized: virtualized\n    })) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText);\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      getToggleInstance: this.getToggleInstance,\n      onKeyDown: this.handleKeyDown\n    }, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderSingleValue = function renderSingleValue() {\n    var value = this.getValue();\n    return this.getLabelByValue(value);\n  };\n\n  _proto.renderMultiValue = function renderMultiValue() {\n    var _this3 = this;\n\n    var _this$props14 = this.props,\n        multi = _this$props14.multi,\n        disabled = _this$props14.disabled;\n\n    if (!multi) {\n      return null;\n    }\n\n    var tags = this.getValue() || [];\n    return tags.map(function (tag) {\n      var _this3$getLabelByValu = _this3.getLabelByValue(tag),\n          isValid = _this3$getLabelByValu.isValid,\n          displayElement = _this3$getLabelByValu.displayElement;\n\n      if (!isValid) {\n        return null;\n      }\n\n      return React.createElement(Tag, {\n        key: tag,\n        closable: !disabled,\n        title: typeof displayElement === 'string' ? displayElement : undefined,\n        onClose: _this3.handleRemoveItemByTag.bind(_this3, tag)\n      }, displayElement);\n    }).filter(function (item) {\n      return item !== null;\n    });\n  };\n\n  _proto.renderInputSearch = function renderInputSearch() {\n    var _this$props15 = this.props,\n        multi = _this$props15.multi,\n        onBlur = _this$props15.onBlur,\n        onFocus = _this$props15.onFocus;\n    var props = {\n      onBlur: onBlur,\n      onFocus: onFocus,\n      componentClass: 'input',\n      inputRef: this.inputRef\n    };\n\n    if (multi) {\n      props.componentClass = InputAutosize; // 52 = 55 (right padding)  - 2 (border) - 6 (left padding)\n\n      props.inputStyle = {\n        maxWidth: this.state.maxWidth - 63\n      };\n    }\n\n    return React.createElement(InputSearch, _extends({}, props, {\n      onChange: this.handleSearch,\n      value: this.state.open ? this.state.searchKeyword : ''\n    }));\n  };\n\n  _proto.render = function render() {\n    var _getToggleWrapperClas;\n\n    var _this$props16 = this.props,\n        disabled = _this$props16.disabled,\n        cleanable = _this$props16.cleanable,\n        locale = _this$props16.locale,\n        toggleComponentClass = _this$props16.toggleComponentClass,\n        style = _this$props16.style,\n        onEnter = _this$props16.onEnter,\n        onEntered = _this$props16.onEntered,\n        onExit = _this$props16.onExit,\n        onExited = _this$props16.onExited,\n        searchable = _this$props16.searchable,\n        multi = _this$props16.multi,\n        rest = _objectWithoutPropertiesLoose(_this$props16, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onEntered\", \"onExit\", \"onExited\", \"searchable\", \"multi\"]);\n\n    var unhandled = getUnhandledProps(InputPicker, rest);\n\n    var _this$renderSingleVal = this.renderSingleValue(),\n        isValid = _this$renderSingleVal.isValid,\n        displayElement = _this$renderSingleVal.displayElement;\n\n    var tagElements = this.renderMultiValue();\n    var hasValue = multi ? !!_get(tagElements, 'length') : isValid;\n    var classes = getToggleWrapperClassName('input', this.addPrefix, this.props, hasValue, (_getToggleWrapperClas = {}, _getToggleWrapperClas[this.addPrefix('tag')] = multi, _getToggleWrapperClas[this.addPrefix('focused')] = this.state.open, _getToggleWrapperClas));\n    var searching = !!this.state.searchKeyword && this.state.open;\n    var displaySearchInput = searchable && !disabled;\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      trigger: \"active\",\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExit: createChainedFunction(this.handleExit, onExit),\n      onExited: createChainedFunction(this.handleExited, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      onKeyDown: this.handleKeyDown,\n      onClick: this.handleClick,\n      ref: this.toggleWrapperRef\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      tabIndex: null,\n      ref: this.toggleRef,\n      componentClass: toggleComponentClass,\n      onClean: this.handleClean,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue\n    }), searching || multi && hasValue ? null : displayElement || locale.placeholder), React.createElement(\"div\", {\n      className: this.addPrefix('tag-wrapper')\n    }, tagElements, displaySearchInput && this.renderInputSearch())));\n  };\n\n  return InputPicker;\n}(React.Component);\n\nInputPicker.propTypes = {\n  data: PropTypes.array,\n  cacheData: PropTypes.array,\n  locale: PropTypes.object,\n  classPrefix: PropTypes.string,\n  className: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  menuClassName: PropTypes.string,\n  menuStyle: PropTypes.object,\n  menuAutoWidth: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disabledItemValues: PropTypes.array,\n  maxHeight: PropTypes.number,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  value: PropTypes.any,\n  defaultValue: PropTypes.any,\n  placeholder: PropTypes.node,\n  searchable: PropTypes.bool,\n  cleanable: PropTypes.bool,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  style: PropTypes.object,\n  creatable: PropTypes.bool,\n  multi: PropTypes.bool,\n  preventOverflow: PropTypes.bool,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  onClean: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  virtualized: PropTypes.bool\n};\nInputPicker.defaultProps = {\n  data: [],\n  cacheData: [],\n  disabledItemValues: [],\n  maxHeight: 320,\n  valueKey: 'value',\n  labelKey: 'label',\n  locale: {\n    placeholder: 'Select',\n    noResultsText: 'No results found',\n    newItem: 'New item',\n    createOption: 'Create option \"{0}\"'\n  },\n  placement: 'bottomStart',\n  searchable: true,\n  cleanable: true,\n  menuAutoWidth: true,\n  virtualized: true\n};\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(InputPicker);","map":{"version":3,"sources":["/home/akram/CreamyCreations/node_modules/rsuite/es/InputPicker/InputPicker.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_omit","_pick","_remove","_trim","_clone","_isUndefined","_get","React","PropTypes","classNames","compose","getWidth","reactToString","filterNodesOfTree","findNodeOfTree","shallowEqual","defaultProps","prefix","getUnhandledProps","createChainedFunction","tplTransform","getDataGroupBy","withPickerMethods","DropdownMenuItem","DropdownMenuCheckItem","getToggleWrapperClassName","onMenuKeyDown","PickerToggle","MenuWrapper","PickerToggleTrigger","DropdownMenu","dropdownMenuPropTypes","InputAutosize","InputSearch","Tag","PLACEMENT","InputPicker","_React$Component","getDerivedStateFromProps","nextProps","prevState","data","focusItemValue","valueKey","props","_this","call","menuContainerRef","positionRef","toggleWrapperRef","toggleRef","triggerRef","inputRef","getFocusableMenuItems","labelKey","menuItems","current","items","Object","values","map","item","getItemData","shouldDisplay","getToggleInstance","focusNextMenuItem","findNode","index","focusItem","setState","focusPrevMenuItem","handleKeyDown","event","multi","down","up","enter","selectFocusMenuCheckItem","selectFocusMenuItem","esc","handleCloseDropdown","del","removeLastItem","handleClean","handleClick","focusInput","_this$state","state","searchKeyword","_this$props","disabledItemValues","some","getAllData","createOption","value","handleSelect","handleChange","_this$props2","getValue","v","push","itemVal","find","updatePosition","handleItemSelect","nextState","handleCheckItemSelect","nextItemValue","checked","_this$props3","onSelect","creatable","newData","create","concat","handleSearch","_this$props4","onSearch","filteredData","length","handleOpenDropdown","show","hide","_this$props$onChange","_this$props5","onChange","_this$props6","disabled","onClean","handleEntered","_this$props$onOpen","_this$props7","onOpen","handleExited","_this$props8","onClose","handleEnter","open","handleExit","blurInput","handleRemoveItemByTag","tag","stopPropagation","tagName","pop","addPrefix","name","classPrefix","renderMenuItem","label","_this$props9","locale","newLabel","createElement","defaultValue","groupBy","_valueKey","_labelKey","defaultOpen","_multi","_data","_value","_focusItemValue","maxWidth","Error","createRef","_proto","prototype","componentDidMount","_this$props10","nextValue","getAllDataAndCache","cacheData","getLabelByValue","_this$props11","renderValue","placeholder","activeItem","displayElement","isValid","_ref2","_this$props12","_ref","newItem","input","getInput","focus","blur","getInputInstance","word","keyword","toLocaleLowerCase","indexOf","isValidElement","nodes","join","i","renderDropdownMenu","_this2","_this$props13","renderMenu","renderExtraFooter","menuClassName","menuStyle","menuAutoWidth","sort","virtualized","_this$state2","menuClassPrefix","classes","allData","menuProps","keys","menu","dropdownMenuItemClassPrefix","undefined","dropdownMenuItemComponentClass","ref","activeItemValues","group","className","noResultsText","autoWidth","style","onKeyDown","renderSingleValue","renderMultiValue","_this3","_this$props14","tags","_this3$getLabelByValu","key","closable","title","bind","filter","renderInputSearch","_this$props15","onBlur","onFocus","componentClass","inputStyle","render","_getToggleWrapperClas","_this$props16","cleanable","toggleComponentClass","onEnter","onEntered","onExit","onExited","searchable","rest","unhandled","_this$renderSingleVal","tagElements","hasValue","searching","displaySearchInput","pickerProps","trigger","speaker","onClick","tabIndex","Component","propTypes","array","object","string","container","oneOfType","node","func","containerPadding","number","block","bool","elementType","maxHeight","any","placement","oneOf","preventOverflow","renderMenuGroup","onGroupTitleClick","onHide","onEntering","onExiting","enhance"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _remove from \"lodash/remove\";\nimport _trim from \"lodash/trim\";\nimport _clone from \"lodash/clone\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _get from \"lodash/get\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport { getWidth } from 'dom-lib';\nimport { reactToString, filterNodesOfTree, findNodeOfTree, shallowEqual } from 'rsuite-utils/lib/utils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, tplTransform, getDataGroupBy, withPickerMethods } from '../utils';\nimport { DropdownMenuItem, DropdownMenuCheckItem, getToggleWrapperClassName, onMenuKeyDown, PickerToggle, MenuWrapper, PickerToggleTrigger } from '../Picker';\nimport DropdownMenu, { dropdownMenuPropTypes } from '../Picker/DropdownMenu';\nimport InputAutosize from './InputAutosize';\nimport InputSearch from './InputSearch';\nimport Tag from '../Tag';\nimport { PLACEMENT } from '../constants';\n\nvar InputPicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InputPicker, _React$Component);\n\n  InputPicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.data && !shallowEqual(nextProps.data, prevState.data)) {\n      return {\n        data: nextProps.data,\n        focusItemValue: _get(nextProps, \"data.0.\" + nextProps.valueKey)\n      };\n    }\n\n    return null;\n  };\n\n  function InputPicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.positionRef = void 0;\n    _this.toggleWrapperRef = void 0;\n    _this.toggleRef = void 0;\n    _this.triggerRef = void 0;\n    _this.inputRef = void 0;\n\n    _this.getFocusableMenuItems = function () {\n      var labelKey = _this.props.labelKey;\n      var menuItems = _this.menuContainerRef.current.menuItems;\n\n      if (!menuItems) {\n        return [];\n      }\n\n      var items = Object.values(menuItems).map(function (item) {\n        return item.props.getItemData();\n      });\n      return filterNodesOfTree(items, function (item) {\n        return _this.shouldDisplay(item[labelKey]);\n      });\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.focusNextMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index + 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.focusPrevMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index - 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (!_this.menuContainerRef.current) {\n        return;\n      }\n\n      var multi = _this.props.multi;\n      onMenuKeyDown(event, {\n        down: _this.focusNextMenuItem,\n        up: _this.focusPrevMenuItem,\n        enter: multi ? _this.selectFocusMenuCheckItem : _this.selectFocusMenuItem,\n        esc: _this.handleCloseDropdown,\n        del: multi ? _this.removeLastItem : _this.handleClean\n      });\n    };\n\n    _this.handleClick = function () {\n      _this.focusInput();\n    };\n\n    _this.selectFocusMenuItem = function (event) {\n      var _this$state = _this.state,\n          focusItemValue = _this$state.focusItemValue,\n          searchKeyword = _this$state.searchKeyword;\n      var _this$props = _this.props,\n          valueKey = _this$props.valueKey,\n          data = _this$props.data,\n          disabledItemValues = _this$props.disabledItemValues;\n\n      if (!focusItemValue || !data) {\n        return;\n      } // If the value is disabled in this option, it is returned.\n\n\n      if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n        return item === focusItemValue;\n      })) {\n        return;\n      } // Find active `MenuItem` by `value`\n\n\n      var focusItem = findNodeOfTree(_this.getAllData(), function (item) {\n        return shallowEqual(item[valueKey], focusItemValue);\n      });\n\n      if (!focusItem && focusItemValue === searchKeyword) {\n        focusItem = _this.createOption(searchKeyword);\n      }\n\n      _this.setState({\n        value: focusItemValue,\n        searchKeyword: ''\n      });\n\n      _this.handleSelect(focusItemValue, focusItem, event);\n\n      _this.handleChange(focusItemValue, event);\n\n      _this.handleCloseDropdown();\n    };\n\n    _this.selectFocusMenuCheckItem = function (event) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          disabledItemValues = _this$props2.disabledItemValues;\n      var focusItemValue = _this.state.focusItemValue;\n\n      var value = _this.getValue();\n\n      var data = _this.getAllData();\n\n      if (!focusItemValue || !data) {\n        return;\n      } // If the value is disabled in this option, it is returned.\n\n\n      if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n        return item === focusItemValue;\n      })) {\n        return;\n      }\n\n      if (!value.some(function (v) {\n        return shallowEqual(v, focusItemValue);\n      })) {\n        value.push(focusItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, focusItemValue);\n        });\n      }\n\n      var focusItem = data.find(function (item) {\n        return shallowEqual(_get(item, valueKey), focusItemValue);\n      });\n\n      if (!focusItem) {\n        focusItem = _this.createOption(focusItemValue);\n      }\n\n      _this.setState({\n        value: value,\n        searchKeyword: ''\n      }, _this.updatePosition);\n\n      _this.handleSelect(value, focusItem, event);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.handleItemSelect = function (value, item, event) {\n      var nextState = {\n        value: value,\n        focusItemValue: value,\n        searchKeyword: ''\n      };\n\n      _this.setState(nextState);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChange(value, event);\n\n      _this.handleCloseDropdown();\n    };\n\n    _this.handleCheckItemSelect = function (nextItemValue, item, event, checked) {\n      var value = _this.getValue();\n\n      if (checked) {\n        value.push(nextItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, nextItemValue);\n        });\n      }\n\n      var nextState = {\n        value: value,\n        searchKeyword: '',\n        focusItemValue: nextItemValue\n      };\n\n      _this.setState(nextState, _this.updatePosition);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChange(value, event);\n\n      _this.focusInput();\n    };\n\n    _this.handleSelect = function (value, item, event) {\n      var _this$props3 = _this.props,\n          onSelect = _this$props3.onSelect,\n          creatable = _this$props3.creatable;\n      var newData = _this.state.newData;\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, item, event);\n\n      if (creatable && item.create) {\n        delete item.create;\n\n        _this.setState({\n          newData: newData.concat(item)\n        });\n      }\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props4 = _this.props,\n          onSearch = _this$props4.onSearch,\n          labelKey = _this$props4.labelKey,\n          valueKey = _this$props4.valueKey;\n      var filteredData = filterNodesOfTree(_this.getAllData(), function (item) {\n        return _this.shouldDisplay(item[labelKey], searchKeyword);\n      });\n      var nextState = {\n        searchKeyword: searchKeyword,\n        focusItemValue: filteredData.length ? filteredData[0][valueKey] : searchKeyword\n      };\n\n      _this.setState(nextState, _this.updatePosition);\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleChange = function (value, event) {\n      var _this$props$onChange, _this$props5;\n\n      (_this$props$onChange = (_this$props5 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props5, value, event);\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props6 = _this.props,\n          disabled = _this$props6.disabled,\n          onClean = _this$props6.onClean;\n      var searchKeyword = _this.state.searchKeyword;\n\n      if (disabled || searchKeyword !== '') {\n        return;\n      }\n\n      var nextState = {\n        value: null,\n        focusItemValue: null,\n        searchKeyword: ''\n      };\n\n      _this.setState(nextState);\n\n      _this.handleChange(null, event);\n\n      _this.updatePosition();\n\n      onClean === null || onClean === void 0 ? void 0 : onClean(event);\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props7;\n\n      (_this$props$onOpen = (_this$props7 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props7);\n    };\n\n    _this.handleExited = function () {\n      var _this$props8 = _this.props,\n          onClose = _this$props8.onClose,\n          multi = _this$props8.multi;\n\n      var value = _this.getValue();\n\n      var nextState = {\n        focusItemValue: multi ? _get(value, 0) : value\n      };\n\n      if (multi) {\n        /**\n         在多选的情况下, 当 searchKeyword 过长，在 focus 的时候会导致内容换行。\n         把 searchKeyword 清空是为了，Menu 在展开时候位置正确。\n         */\n        nextState.searchKeyword = '';\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState(nextState);\n    };\n\n    _this.handleEnter = function () {\n      _this.focusInput();\n\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleExit = function () {\n      _this.blurInput();\n\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handleRemoveItemByTag = function (tag, event) {\n      event.stopPropagation();\n\n      var value = _this.getValue();\n\n      _remove(value, function (itemVal) {\n        return shallowEqual(itemVal, tag);\n      });\n\n      _this.setState({\n        value: value\n      }, _this.updatePosition);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.removeLastItem = function (event) {\n      var tagName = _get(event, 'target.tagName');\n\n      if (tagName !== 'INPUT') {\n        _this.focusInput();\n\n        return;\n      }\n\n      if (tagName === 'INPUT' && _get(event, 'target.value')) {\n        return;\n      }\n\n      var value = _this.getValue();\n\n      value.pop();\n\n      _this.setState({\n        value: value\n      }, _this.updatePosition);\n\n      _this.handleChange(value, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderMenuItem = function (label, item) {\n      var _this$props9 = _this.props,\n          locale = _this$props9.locale,\n          renderMenuItem = _this$props9.renderMenuItem;\n      var newLabel = item.create ? React.createElement(\"span\", null, tplTransform(locale.createOption, label)) : label;\n      return renderMenuItem ? renderMenuItem(newLabel, item) : newLabel;\n    };\n\n    var defaultValue = props.defaultValue,\n        groupBy = props.groupBy,\n        _valueKey = props.valueKey,\n        _labelKey = props.labelKey,\n        defaultOpen = props.defaultOpen,\n        _multi = props.multi,\n        _data = props.data;\n\n    var _value = _multi ? defaultValue || [] : defaultValue;\n\n    var _focusItemValue = _multi ? _get(_value, 0) : defaultValue;\n\n    _this.state = {\n      data: _data,\n      value: _value,\n      focusItemValue: _focusItemValue,\n      searchKeyword: '',\n      newData: [],\n      open: defaultOpen,\n      maxWidth: 100\n    };\n\n    if (groupBy === _valueKey || groupBy === _labelKey) {\n      throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n    }\n\n    _this.menuContainerRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.toggleWrapperRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.inputRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = InputPicker.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.toggleWrapperRef.current) {\n      var maxWidth = getWidth(this.toggleWrapperRef.current);\n      this.setState({\n        maxWidth: maxWidth\n      });\n    }\n  };\n\n  _proto.getValue = function getValue() {\n    var _this$props10 = this.props,\n        value = _this$props10.value,\n        multi = _this$props10.multi;\n    var nextValue = _isUndefined(value) ? this.state.value : value;\n\n    if (multi) {\n      return _clone(nextValue) || [];\n    }\n\n    return nextValue;\n  };\n\n  _proto.getAllData = function getAllData() {\n    var data = this.props.data;\n    var newData = this.state.newData;\n    return [].concat(data, newData);\n  };\n\n  _proto.getAllDataAndCache = function getAllDataAndCache() {\n    var cacheData = this.props.cacheData;\n    var data = this.getAllData();\n    return [].concat(data, cacheData);\n  };\n\n  _proto.getLabelByValue = function getLabelByValue(value) {\n    var _this$props11 = this.props,\n        renderValue = _this$props11.renderValue,\n        placeholder = _this$props11.placeholder,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey; // Find active `MenuItem` by `value`\n\n    var activeItem = findNodeOfTree(this.getAllDataAndCache(), function (item) {\n      return shallowEqual(item[valueKey], value);\n    });\n    var displayElement = placeholder;\n\n    if (_get(activeItem, labelKey)) {\n      displayElement = _get(activeItem, labelKey);\n\n      if (renderValue) {\n        displayElement = renderValue(value, activeItem, displayElement);\n      }\n    }\n\n    return {\n      isValid: !!activeItem,\n      displayElement: displayElement\n    };\n  };\n\n  _proto.createOption = function createOption(value) {\n    var _ref2;\n\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        groupBy = _this$props12.groupBy,\n        locale = _this$props12.locale;\n\n    if (groupBy) {\n      var _ref;\n\n      return _ref = {\n        create: true\n      }, _ref[groupBy] = locale.newItem, _ref[valueKey] = value, _ref[labelKey] = value, _ref;\n    }\n\n    return _ref2 = {\n      create: true\n    }, _ref2[valueKey] = value, _ref2[labelKey] = value, _ref2;\n  };\n\n  _proto.focusInput = function focusInput() {\n    var input = this.getInput();\n    if (!input) return;\n    input.focus();\n  };\n\n  _proto.blurInput = function blurInput() {\n    var input = this.getInput();\n    if (!input) return;\n    input.blur();\n  };\n\n  _proto.getInput = function getInput() {\n    var multi = this.props.multi;\n\n    if (multi) {\n      return this.inputRef.current.getInputInstance();\n    }\n\n    return this.inputRef.current;\n  };\n\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n  _proto.shouldDisplay = function shouldDisplay(label, searchKeyword) {\n    var word = typeof searchKeyword === 'undefined' ? this.state.searchKeyword : searchKeyword;\n\n    if (!_trim(word)) {\n      return true;\n    }\n\n    var keyword = word.toLocaleLowerCase();\n\n    if (typeof label === 'string' || typeof label === 'number') {\n      return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n    } else if (React.isValidElement(label)) {\n      var nodes = reactToString(label);\n      return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n    }\n\n    return false;\n  };\n\n  _proto.findNode = function findNode(focus) {\n    var items = this.getFocusableMenuItems();\n    var valueKey = this.props.valueKey;\n    var focusItemValue = this.state.focusItemValue;\n\n    for (var i = 0; i < items.length; i += 1) {\n      if (shallowEqual(focusItemValue, items[i][valueKey])) {\n        focus(items, i);\n        return;\n      }\n    }\n\n    focus(items, -1);\n  };\n\n  _proto.updatePosition = function updatePosition() {\n    if (this.positionRef.current) {\n      this.positionRef.current.updatePosition(true);\n    }\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this2 = this;\n\n    var _this$props13 = this.props,\n        labelKey = _this$props13.labelKey,\n        groupBy = _this$props13.groupBy,\n        locale = _this$props13.locale,\n        renderMenu = _this$props13.renderMenu,\n        renderExtraFooter = _this$props13.renderExtraFooter,\n        menuClassName = _this$props13.menuClassName,\n        menuStyle = _this$props13.menuStyle,\n        menuAutoWidth = _this$props13.menuAutoWidth,\n        creatable = _this$props13.creatable,\n        valueKey = _this$props13.valueKey,\n        multi = _this$props13.multi,\n        sort = _this$props13.sort,\n        virtualized = _this$props13.virtualized;\n    var _this$state2 = this.state,\n        focusItemValue = _this$state2.focusItemValue,\n        searchKeyword = _this$state2.searchKeyword;\n    var menuClassPrefix = this.addPrefix(multi ? 'check-menu' : 'select-menu');\n    var classes = classNames(menuClassPrefix, menuClassName);\n    var allData = this.getAllData();\n    var filteredData = filterNodesOfTree(allData, function (item) {\n      return _this2.shouldDisplay(item[labelKey]);\n    });\n\n    if (creatable && searchKeyword && !findNodeOfTree(allData, function (item) {\n      return item[valueKey] === searchKeyword;\n    })) {\n      filteredData = [].concat(filteredData, [this.createOption(searchKeyword)]);\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      filteredData = getDataGroupBy(filteredData, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      filteredData = filteredData.sort(sort(false));\n    }\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['className', 'style', 'classPrefix'])));\n\n    var value = this.getValue();\n    var menu = filteredData.length ? React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: menuClassPrefix,\n      dropdownMenuItemClassPrefix: multi ? undefined : menuClassPrefix + \"-item\",\n      dropdownMenuItemComponentClass: multi ? DropdownMenuCheckItem : DropdownMenuItem,\n      ref: this.menuContainerRef,\n      activeItemValues: multi ? value : [value],\n      focusItemValue: focusItemValue,\n      data: filteredData,\n      group: !_isUndefined(groupBy),\n      onSelect: multi ? this.handleCheckItemSelect : this.handleItemSelect,\n      renderMenuItem: this.renderMenuItem,\n      virtualized: virtualized\n    })) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText);\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      getToggleInstance: this.getToggleInstance,\n      onKeyDown: this.handleKeyDown\n    }, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderSingleValue = function renderSingleValue() {\n    var value = this.getValue();\n    return this.getLabelByValue(value);\n  };\n\n  _proto.renderMultiValue = function renderMultiValue() {\n    var _this3 = this;\n\n    var _this$props14 = this.props,\n        multi = _this$props14.multi,\n        disabled = _this$props14.disabled;\n\n    if (!multi) {\n      return null;\n    }\n\n    var tags = this.getValue() || [];\n    return tags.map(function (tag) {\n      var _this3$getLabelByValu = _this3.getLabelByValue(tag),\n          isValid = _this3$getLabelByValu.isValid,\n          displayElement = _this3$getLabelByValu.displayElement;\n\n      if (!isValid) {\n        return null;\n      }\n\n      return React.createElement(Tag, {\n        key: tag,\n        closable: !disabled,\n        title: typeof displayElement === 'string' ? displayElement : undefined,\n        onClose: _this3.handleRemoveItemByTag.bind(_this3, tag)\n      }, displayElement);\n    }).filter(function (item) {\n      return item !== null;\n    });\n  };\n\n  _proto.renderInputSearch = function renderInputSearch() {\n    var _this$props15 = this.props,\n        multi = _this$props15.multi,\n        onBlur = _this$props15.onBlur,\n        onFocus = _this$props15.onFocus;\n    var props = {\n      onBlur: onBlur,\n      onFocus: onFocus,\n      componentClass: 'input',\n      inputRef: this.inputRef\n    };\n\n    if (multi) {\n      props.componentClass = InputAutosize; // 52 = 55 (right padding)  - 2 (border) - 6 (left padding)\n\n      props.inputStyle = {\n        maxWidth: this.state.maxWidth - 63\n      };\n    }\n\n    return React.createElement(InputSearch, _extends({}, props, {\n      onChange: this.handleSearch,\n      value: this.state.open ? this.state.searchKeyword : ''\n    }));\n  };\n\n  _proto.render = function render() {\n    var _getToggleWrapperClas;\n\n    var _this$props16 = this.props,\n        disabled = _this$props16.disabled,\n        cleanable = _this$props16.cleanable,\n        locale = _this$props16.locale,\n        toggleComponentClass = _this$props16.toggleComponentClass,\n        style = _this$props16.style,\n        onEnter = _this$props16.onEnter,\n        onEntered = _this$props16.onEntered,\n        onExit = _this$props16.onExit,\n        onExited = _this$props16.onExited,\n        searchable = _this$props16.searchable,\n        multi = _this$props16.multi,\n        rest = _objectWithoutPropertiesLoose(_this$props16, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onEntered\", \"onExit\", \"onExited\", \"searchable\", \"multi\"]);\n\n    var unhandled = getUnhandledProps(InputPicker, rest);\n\n    var _this$renderSingleVal = this.renderSingleValue(),\n        isValid = _this$renderSingleVal.isValid,\n        displayElement = _this$renderSingleVal.displayElement;\n\n    var tagElements = this.renderMultiValue();\n    var hasValue = multi ? !!_get(tagElements, 'length') : isValid;\n    var classes = getToggleWrapperClassName('input', this.addPrefix, this.props, hasValue, (_getToggleWrapperClas = {}, _getToggleWrapperClas[this.addPrefix('tag')] = multi, _getToggleWrapperClas[this.addPrefix('focused')] = this.state.open, _getToggleWrapperClas));\n    var searching = !!this.state.searchKeyword && this.state.open;\n    var displaySearchInput = searchable && !disabled;\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      trigger: \"active\",\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExit: createChainedFunction(this.handleExit, onExit),\n      onExited: createChainedFunction(this.handleExited, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      onKeyDown: this.handleKeyDown,\n      onClick: this.handleClick,\n      ref: this.toggleWrapperRef\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      tabIndex: null,\n      ref: this.toggleRef,\n      componentClass: toggleComponentClass,\n      onClean: this.handleClean,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue\n    }), searching || multi && hasValue ? null : displayElement || locale.placeholder), React.createElement(\"div\", {\n      className: this.addPrefix('tag-wrapper')\n    }, tagElements, displaySearchInput && this.renderInputSearch())));\n  };\n\n  return InputPicker;\n}(React.Component);\n\nInputPicker.propTypes = {\n  data: PropTypes.array,\n  cacheData: PropTypes.array,\n  locale: PropTypes.object,\n  classPrefix: PropTypes.string,\n  className: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  menuClassName: PropTypes.string,\n  menuStyle: PropTypes.object,\n  menuAutoWidth: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disabledItemValues: PropTypes.array,\n  maxHeight: PropTypes.number,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  value: PropTypes.any,\n  defaultValue: PropTypes.any,\n  placeholder: PropTypes.node,\n  searchable: PropTypes.bool,\n  cleanable: PropTypes.bool,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  style: PropTypes.object,\n  creatable: PropTypes.bool,\n  multi: PropTypes.bool,\n  preventOverflow: PropTypes.bool,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  onClean: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  virtualized: PropTypes.bool\n};\nInputPicker.defaultProps = {\n  data: [],\n  cacheData: [],\n  disabledItemValues: [],\n  maxHeight: 320,\n  valueKey: 'value',\n  labelKey: 'label',\n  locale: {\n    placeholder: 'Select',\n    noResultsText: 'No results found',\n    newItem: 'New item',\n    createOption: 'Create option \"{0}\"'\n  },\n  placement: 'bottomStart',\n  searchable: true,\n  cleanable: true,\n  menuAutoWidth: true,\n  virtualized: true\n};\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(InputPicker);"]},"metadata":{},"sourceType":"module"}