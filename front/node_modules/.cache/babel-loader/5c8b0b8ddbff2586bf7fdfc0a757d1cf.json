{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport compareAsc from \"date-fns/compare_asc\";\nimport endOfMonth from \"date-fns/end_of_month\";\nimport startOfMonth from \"date-fns/start_of_month\";\nimport endOfWeek from \"date-fns/end_of_week\";\nimport startOfWeek from \"date-fns/start_of_week\";\nimport endOfISOWeek from \"date-fns/end_of_iso_week\";\nimport startOfISOWeek from \"date-fns/start_of_iso_week\";\nimport addMonths from \"date-fns/add_months\";\nimport isSameMonth from \"date-fns/is_same_month\";\nimport isSameDay from \"date-fns/is_same_day\";\nimport isAfter from \"date-fns/is_after\";\nimport isBefore from \"date-fns/is_before\";\nimport addDays from \"date-fns/add_days\";\nimport format from \"date-fns/format\";\nimport IntlProvider from '../IntlProvider';\nimport Toolbar from './Toolbar';\nimport DatePicker from './DatePicker';\nimport { setTimingMargin, getCalendarDate, TYPE } from './utils';\nimport { defaultProps, getUnhandledProps, prefix, createChainedFunction, withPickerMethods } from '../utils';\nimport { PickerToggle, MenuWrapper, PickerToggleTrigger, getToggleWrapperClassName } from '../Picker';\nimport { PLACEMENT } from '../constants';\n\nvar DateRangePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DateRangePicker, _React$Component);\n\n  DateRangePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value;\n\n    if (typeof value === 'undefined') {\n      return null;\n    }\n\n    if (value[0] && !isSameDay(value[0], prevState.value[0]) || value[1] && !isSameDay(value[1], prevState.value[1])) {\n      return {\n        value: value,\n        selectValue: value,\n        calendarDate: getCalendarDate(value)\n      };\n    }\n\n    return null;\n  };\n\n  function DateRangePicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getValue = function () {\n      var value = _this.props.value;\n\n      if (typeof value !== 'undefined') {\n        return value;\n      }\n\n      return _this.state.value || [];\n    };\n\n    _this.getWeekHoverRange = function (date) {\n      var isoWeek = _this.props.isoWeek;\n\n      if (isoWeek) {\n        // set to the first day of this week according to ISO 8601, 12:00 am\n        return [startOfISOWeek(date), endOfISOWeek(date)];\n      }\n\n      return [startOfWeek(date), endOfWeek(date)];\n    };\n\n    _this.getMonthHoverRange = function (date) {\n      return [startOfMonth(date), endOfMonth(date)];\n    };\n\n    _this.handleChangeCalendarDate = function (index, date) {\n      var calendarDate = _this.state.calendarDate;\n      calendarDate[index] = date;\n\n      _this.setState({\n        calendarDate: calendarDate\n      });\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleShortcutPageDate = function (value, closeOverlay, event) {\n      _this.updateValue(event, value, closeOverlay);\n    };\n\n    _this.handleOK = function (event) {\n      var _this$props$onOk, _this$props;\n\n      _this.updateValue(event);\n\n      (_this$props$onOk = (_this$props = _this.props).onOk) === null || _this$props$onOk === void 0 ? void 0 : _this$props$onOk.call(_this$props, _this.state.selectValue, event);\n    };\n\n    _this.handleChangeSelectValue = function (date, event) {\n      var _this$state = _this.state,\n          selectValue = _this$state.selectValue,\n          doneSelected = _this$state.doneSelected;\n      var _this$props2 = _this.props,\n          onSelect = _this$props2.onSelect,\n          oneTap = _this$props2.oneTap;\n      var nextValue = [];\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected) {\n        if (nextHoverValue.length) {\n          nextValue = [nextHoverValue[0], nextHoverValue[1], date];\n          nextHoverValue = [nextHoverValue[0], nextHoverValue[1], date];\n        } else {\n          nextValue = [date, undefined, date];\n        }\n      } else {\n        if (nextHoverValue.length) {\n          nextValue = [selectValue[0], selectValue[1]];\n        } else {\n          nextValue = [selectValue[0], date];\n        }\n\n        if (isAfter(nextValue[0], nextValue[1])) {\n          nextValue.reverse();\n        }\n\n        nextValue[0] = setTimingMargin(nextValue[0]);\n        nextValue[1] = setTimingMargin(nextValue[1]);\n\n        _this.setState({\n          calendarDate: getCalendarDate(nextValue)\n        });\n      }\n\n      var nextState = {\n        doneSelected: !doneSelected,\n        selectValue: nextValue,\n        hoverValue: nextHoverValue\n      };\n      event.persist();\n\n      _this.setState(nextState, function () {\n        // 如果是单击模式，并且是第一次点选，再触发一次点击\n        if (oneTap && !_this.state.doneSelected) {\n          _this.handleChangeSelectValue(date, event);\n        } // 如果是单击模式，并且是第二次点选，更新值，并关闭面板\n\n\n        if (oneTap && _this.state.doneSelected) {\n          _this.updateValue(event);\n        }\n\n        onSelect && onSelect(date, event);\n      });\n    };\n\n    _this.handleMouseMoveSelectValue = function (date) {\n      var _this$state2 = _this.state,\n          doneSelected = _this$state2.doneSelected,\n          selectValue = _this$state2.selectValue,\n          hoverValue = _this$state2.hoverValue,\n          currentHoverDate = _this$state2.currentHoverDate;\n      var hoverRange = _this.props.hoverRange;\n\n      if (currentHoverDate && isSameDay(date, currentHoverDate)) {\n        return;\n      }\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected && !_isUndefined(hoverRange)) {\n        _this.setState({\n          currentHoverDate: date,\n          hoverValue: nextHoverValue\n        });\n\n        return;\n      } else if (doneSelected) {\n        return;\n      }\n\n      var nextValue = selectValue;\n\n      if (!nextHoverValue.length) {\n        nextValue[1] = date;\n      } else if (hoverValue) {\n        nextValue = [isBefore(nextHoverValue[0], hoverValue[0]) ? nextHoverValue[0] : hoverValue[0], isAfter(nextHoverValue[1], hoverValue[1]) ? nextHoverValue[1] : hoverValue[1], nextValue[2]];\n      } // If `nextValue[0]` is greater than `nextValue[1]` then reverse order\n\n\n      if (isAfter(nextValue[0], nextValue[1])) {\n        nextValue.reverse();\n      }\n\n      _this.setState({\n        currentHoverDate: date,\n        selectValue: nextValue\n      });\n    };\n\n    _this.handleClean = function (event) {\n      _this.setState({\n        calendarDate: getCalendarDate()\n      });\n\n      _this.updateValue(event, []);\n    };\n\n    _this.handleEnter = function () {\n      var value = _this.getValue();\n\n      var calendarDate;\n\n      if (value && value.length) {\n        var startDate = value[0],\n            endData = value[1];\n        calendarDate = [startDate, isSameMonth(startDate, endData) ? addMonths(endData, 1) : endData];\n      } else {\n        calendarDate = getCalendarDate(_this.props.defaultCalendarValue);\n      }\n\n      _this.setState({\n        selectValue: value,\n        calendarDate: calendarDate,\n        active: true\n      });\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props3;\n\n      (_this$props$onOpen = (_this$props3 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props3);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props4;\n\n      _this.setState({\n        active: false,\n        doneSelected: true\n      });\n\n      (_this$props$onClose = (_this$props4 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props4);\n    };\n\n    _this.disabledOkButton = function () {\n      var _this$state3 = _this.state,\n          selectValue = _this$state3.selectValue,\n          doneSelected = _this$state3.doneSelected;\n\n      if (!selectValue[0] || !selectValue[1] || !doneSelected) {\n        return true;\n      }\n\n      return _this.disabledByBetween(selectValue[0], selectValue[1], TYPE.TOOLBAR_BUTTON_OK);\n    };\n\n    _this.disabledShortcutButton = function (value) {\n      if (value === void 0) {\n        value = [];\n      }\n\n      if (!value[0] || !value[1]) {\n        return true;\n      }\n\n      return _this.disabledByBetween(value[0], value[1], TYPE.TOOLBAR_SHORTCUT);\n    };\n\n    _this.handleDisabledDate = function (date, values, type) {\n      var disabledDate = _this.props.disabledDate;\n      var doneSelected = _this.state.doneSelected;\n\n      if (disabledDate) {\n        return disabledDate(date, values, doneSelected, type);\n      }\n\n      return false;\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var defaultValue = props.defaultValue,\n        _value = props.value,\n        defaultCalendarValue = props.defaultCalendarValue;\n    var activeValue = _value || defaultValue || [];\n\n    var _calendarDate = getCalendarDate(_value || defaultCalendarValue);\n\n    _this.state = {\n      value: activeValue,\n      selectValue: activeValue,\n      doneSelected: true,\n      calendarDate: _calendarDate,\n      hoverValue: [],\n      currentHoverDate: null\n    }; // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = DateRangePicker.prototype;\n\n  _proto.getDateString = function getDateString(value) {\n    var _this$props5 = this.props,\n        placeholder = _this$props5.placeholder,\n        formatType = _this$props5.format,\n        renderValue = _this$props5.renderValue;\n    var nextValue = value || this.getValue();\n    var startDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0];\n    var endDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1];\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n      return renderValue ? renderValue(displayValue, formatType) : format(displayValue[0], formatType) + \" ~ \" + format(displayValue[1], formatType);\n    }\n\n    return placeholder || formatType + \" ~ \" + formatType;\n  } // hover range presets\n  ;\n\n  _proto.getHoverRange = function getHoverRange(date) {\n    var hoverRange = this.props.hoverRange;\n\n    if (!hoverRange) {\n      return [];\n    }\n\n    var hoverRangeFunc = hoverRange;\n\n    if (hoverRange === 'week') {\n      hoverRangeFunc = this.getWeekHoverRange;\n    }\n\n    if (hoverRangeFunc === 'month') {\n      hoverRangeFunc = this.getMonthHoverRange;\n    }\n\n    if (typeof hoverRangeFunc !== 'function') {\n      return [];\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return [];\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues.reverse();\n    }\n\n    return hoverValues;\n  };\n\n  _proto.resetPageDate = function resetPageDate() {\n    var selectValue = this.getValue();\n    var calendarDate = getCalendarDate(selectValue);\n    this.setState({\n      selectValue: selectValue,\n      calendarDate: calendarDate\n    });\n  }\n  /**\n   * Toolbar operation callback function\n   */\n  ;\n\n  _proto.updateValue = function updateValue(event, nextSelectValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    }\n\n    var _this$state4 = this.state,\n        value = _this$state4.value,\n        selectValue = _this$state4.selectValue;\n    var onChange = this.props.onChange;\n    var nextValue = !_isUndefined(nextSelectValue) ? nextSelectValue : selectValue;\n    this.setState({\n      selectValue: nextValue || [],\n      value: nextValue\n    });\n\n    if (onChange && (!isSameDay(nextValue[0], value[0]) || !isSameDay(nextValue[1], value[1]))) {\n      onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      this.handleCloseDropdown();\n    }\n  };\n\n  _proto.disabledByBetween = function disabledByBetween(start, end, type) {\n    var disabledDate = this.props.disabledDate;\n    var _this$state5 = this.state,\n        selectValue = _this$state5.selectValue,\n        doneSelected = _this$state5.doneSelected;\n    var selectStartDate = selectValue[0];\n    var selectEndDate = selectValue[1];\n    var nextSelectValue = [selectStartDate, selectEndDate]; // If the date is between the start and the end\n    // the button is disabled\n\n    while (isBefore(start, end) || isSameDay(start, end)) {\n      if (disabledDate === null || disabledDate === void 0 ? void 0 : disabledDate(start, nextSelectValue, doneSelected, type)) {\n        return true;\n      }\n\n      start = addDays(start, 1);\n    }\n\n    return false;\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props6 = this.props,\n        menuClassName = _this$props6.menuClassName,\n        ranges = _this$props6.ranges,\n        isoWeek = _this$props6.isoWeek,\n        limitEndYear = _this$props6.limitEndYear,\n        oneTap = _this$props6.oneTap,\n        showWeekNumbers = _this$props6.showWeekNumbers;\n    var _this$state6 = this.state,\n        calendarDate = _this$state6.calendarDate,\n        selectValue = _this$state6.selectValue,\n        hoverValue = _this$state6.hoverValue,\n        doneSelected = _this$state6.doneSelected;\n    var classes = classNames(this.addPrefix('daterange-menu'), menuClassName);\n    var pickerProps = {\n      isoWeek: isoWeek,\n      doneSelected: doneSelected,\n      hoverValue: hoverValue,\n      calendarDate: calendarDate,\n      limitEndYear: limitEndYear,\n      showWeekNumbers: showWeekNumbers,\n      value: selectValue,\n      disabledDate: this.handleDisabledDate,\n      onSelect: this.handleChangeSelectValue,\n      onMouseMove: this.handleMouseMoveSelectValue,\n      onChangeCalendarDate: this.handleChangeCalendarDate\n    };\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      ref: this.menuContainerRef\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-panel')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-content')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-header')\n    }, this.getDateString(selectValue)), React.createElement(\"div\", {\n      className: this.addPrefix('daterange-calendar-group')\n    }, React.createElement(DatePicker, _extends({\n      index: 0\n    }, pickerProps)), React.createElement(DatePicker, _extends({\n      index: 1\n    }, pickerProps)))), React.createElement(Toolbar, {\n      ranges: ranges,\n      selectValue: selectValue,\n      disabledOkButton: this.disabledOkButton,\n      disabledShortcutButton: this.disabledShortcutButton,\n      onShortcut: this.handleShortcutPageDate,\n      onOk: this.handleOK,\n      hideOkButton: oneTap\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        cleanable = _this$props7.cleanable,\n        locale = _this$props7.locale,\n        toggleComponentClass = _this$props7.toggleComponentClass,\n        style = _this$props7.style,\n        onEntered = _this$props7.onEntered,\n        onEnter = _this$props7.onEnter,\n        onExited = _this$props7.onExited,\n        onClean = _this$props7.onClean,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEntered\", \"onEnter\", \"onExited\", \"onClean\"]);\n\n    var value = this.getValue();\n    var unhandled = getUnhandledProps(DateRangePicker, rest);\n    var hasValue = value && value.length > 1;\n    var classes = getToggleWrapperClassName('daterange', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlProvider, {\n      locale: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExit: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active\n    }), this.getDateString()))));\n  };\n\n  return DateRangePicker;\n}(React.Component);\n\nDateRangePicker.propTypes = {\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  placeholder: PropTypes.node,\n  format: PropTypes.string,\n  disabled: PropTypes.bool,\n  locale: PropTypes.object,\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  cleanable: PropTypes.bool,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  className: PropTypes.string,\n  menuClassName: PropTypes.string,\n  classPrefix: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  style: PropTypes.object,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  preventOverflow: PropTypes.bool,\n  showWeekNumbers: PropTypes.bool,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onClean: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  renderValue: PropTypes.func\n};\nDateRangePicker.defaultProps = {\n  appearance: 'default',\n  placement: 'bottomStart',\n  limitEndYear: 1000,\n  format: 'YYYY-MM-DD',\n  placeholder: '',\n  cleanable: true,\n  locale: {\n    sunday: 'Su',\n    monday: 'Mo',\n    tuesday: 'Tu',\n    wednesday: 'We',\n    thursday: 'Th',\n    friday: 'Fr',\n    saturday: 'Sa',\n    ok: 'OK',\n    today: 'Today',\n    yesterday: 'Yesterday',\n    last7Days: 'Last 7 Days',\n    hours: 'Hours',\n    minutes: 'Minutes',\n    seconds: 'Seconds'\n  }\n};\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(DateRangePicker);","map":{"version":3,"sources":["/home/akram/CreamyCreations/node_modules/rsuite/es/DateRangePicker/DateRangePicker.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isUndefined","React","PropTypes","classNames","compose","compareAsc","endOfMonth","startOfMonth","endOfWeek","startOfWeek","endOfISOWeek","startOfISOWeek","addMonths","isSameMonth","isSameDay","isAfter","isBefore","addDays","format","IntlProvider","Toolbar","DatePicker","setTimingMargin","getCalendarDate","TYPE","defaultProps","getUnhandledProps","prefix","createChainedFunction","withPickerMethods","PickerToggle","MenuWrapper","PickerToggleTrigger","getToggleWrapperClassName","PLACEMENT","DateRangePicker","_React$Component","getDerivedStateFromProps","nextProps","prevState","value","selectValue","calendarDate","props","_this","call","menuContainerRef","triggerRef","getValue","state","getWeekHoverRange","date","isoWeek","getMonthHoverRange","handleChangeCalendarDate","index","setState","handleCloseDropdown","current","hide","handleOpenDropdown","show","handleShortcutPageDate","closeOverlay","event","updateValue","handleOK","_this$props$onOk","_this$props","onOk","handleChangeSelectValue","_this$state","doneSelected","_this$props2","onSelect","oneTap","nextValue","nextHoverValue","getHoverRange","length","undefined","reverse","nextState","hoverValue","persist","handleMouseMoveSelectValue","_this$state2","currentHoverDate","hoverRange","handleClean","handleEnter","startDate","endData","defaultCalendarValue","active","handleEntered","_this$props$onOpen","_this$props3","onOpen","handleExit","_this$props$onClose","_this$props4","onClose","disabledOkButton","_this$state3","disabledByBetween","TOOLBAR_BUTTON_OK","disabledShortcutButton","TOOLBAR_SHORTCUT","handleDisabledDate","values","type","disabledDate","addPrefix","name","classPrefix","defaultValue","_value","activeValue","_calendarDate","createRef","_proto","prototype","getDateString","_this$props5","placeholder","formatType","renderValue","endDate","displayValue","sort","hoverRangeFunc","hoverValues","isHoverRangeValid","Array","resetPageDate","nextSelectValue","_this$state4","onChange","start","end","_this$state5","selectStartDate","selectEndDate","renderDropdownMenu","_this$props6","menuClassName","ranges","limitEndYear","showWeekNumbers","_this$state6","classes","pickerProps","onMouseMove","onChangeCalendarDate","createElement","className","ref","onShortcut","hideOkButton","render","_this$props7","disabled","cleanable","locale","toggleComponentClass","style","onEntered","onEnter","onExited","onClean","rest","unhandled","hasValue","onExit","speaker","componentClass","Component","propTypes","appearance","oneOf","array","arrayOf","instanceOf","Date","node","string","bool","object","oneOfType","func","number","container","containerPadding","block","elementType","open","defaultOpen","placement","preventOverflow","onHide","onEntering","onExiting","sunday","monday","tuesday","wednesday","thursday","friday","saturday","ok","today","yesterday","last7Days","hours","minutes","seconds","enhance"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport compareAsc from \"date-fns/compare_asc\";\nimport endOfMonth from \"date-fns/end_of_month\";\nimport startOfMonth from \"date-fns/start_of_month\";\nimport endOfWeek from \"date-fns/end_of_week\";\nimport startOfWeek from \"date-fns/start_of_week\";\nimport endOfISOWeek from \"date-fns/end_of_iso_week\";\nimport startOfISOWeek from \"date-fns/start_of_iso_week\";\nimport addMonths from \"date-fns/add_months\";\nimport isSameMonth from \"date-fns/is_same_month\";\nimport isSameDay from \"date-fns/is_same_day\";\nimport isAfter from \"date-fns/is_after\";\nimport isBefore from \"date-fns/is_before\";\nimport addDays from \"date-fns/add_days\";\nimport format from \"date-fns/format\";\nimport IntlProvider from '../IntlProvider';\nimport Toolbar from './Toolbar';\nimport DatePicker from './DatePicker';\nimport { setTimingMargin, getCalendarDate, TYPE } from './utils';\nimport { defaultProps, getUnhandledProps, prefix, createChainedFunction, withPickerMethods } from '../utils';\nimport { PickerToggle, MenuWrapper, PickerToggleTrigger, getToggleWrapperClassName } from '../Picker';\nimport { PLACEMENT } from '../constants';\n\nvar DateRangePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DateRangePicker, _React$Component);\n\n  DateRangePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value;\n\n    if (typeof value === 'undefined') {\n      return null;\n    }\n\n    if (value[0] && !isSameDay(value[0], prevState.value[0]) || value[1] && !isSameDay(value[1], prevState.value[1])) {\n      return {\n        value: value,\n        selectValue: value,\n        calendarDate: getCalendarDate(value)\n      };\n    }\n\n    return null;\n  };\n\n  function DateRangePicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getValue = function () {\n      var value = _this.props.value;\n\n      if (typeof value !== 'undefined') {\n        return value;\n      }\n\n      return _this.state.value || [];\n    };\n\n    _this.getWeekHoverRange = function (date) {\n      var isoWeek = _this.props.isoWeek;\n\n      if (isoWeek) {\n        // set to the first day of this week according to ISO 8601, 12:00 am\n        return [startOfISOWeek(date), endOfISOWeek(date)];\n      }\n\n      return [startOfWeek(date), endOfWeek(date)];\n    };\n\n    _this.getMonthHoverRange = function (date) {\n      return [startOfMonth(date), endOfMonth(date)];\n    };\n\n    _this.handleChangeCalendarDate = function (index, date) {\n      var calendarDate = _this.state.calendarDate;\n      calendarDate[index] = date;\n\n      _this.setState({\n        calendarDate: calendarDate\n      });\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.handleShortcutPageDate = function (value, closeOverlay, event) {\n      _this.updateValue(event, value, closeOverlay);\n    };\n\n    _this.handleOK = function (event) {\n      var _this$props$onOk, _this$props;\n\n      _this.updateValue(event);\n\n      (_this$props$onOk = (_this$props = _this.props).onOk) === null || _this$props$onOk === void 0 ? void 0 : _this$props$onOk.call(_this$props, _this.state.selectValue, event);\n    };\n\n    _this.handleChangeSelectValue = function (date, event) {\n      var _this$state = _this.state,\n          selectValue = _this$state.selectValue,\n          doneSelected = _this$state.doneSelected;\n      var _this$props2 = _this.props,\n          onSelect = _this$props2.onSelect,\n          oneTap = _this$props2.oneTap;\n      var nextValue = [];\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected) {\n        if (nextHoverValue.length) {\n          nextValue = [nextHoverValue[0], nextHoverValue[1], date];\n          nextHoverValue = [nextHoverValue[0], nextHoverValue[1], date];\n        } else {\n          nextValue = [date, undefined, date];\n        }\n      } else {\n        if (nextHoverValue.length) {\n          nextValue = [selectValue[0], selectValue[1]];\n        } else {\n          nextValue = [selectValue[0], date];\n        }\n\n        if (isAfter(nextValue[0], nextValue[1])) {\n          nextValue.reverse();\n        }\n\n        nextValue[0] = setTimingMargin(nextValue[0]);\n        nextValue[1] = setTimingMargin(nextValue[1]);\n\n        _this.setState({\n          calendarDate: getCalendarDate(nextValue)\n        });\n      }\n\n      var nextState = {\n        doneSelected: !doneSelected,\n        selectValue: nextValue,\n        hoverValue: nextHoverValue\n      };\n      event.persist();\n\n      _this.setState(nextState, function () {\n        // 如果是单击模式，并且是第一次点选，再触发一次点击\n        if (oneTap && !_this.state.doneSelected) {\n          _this.handleChangeSelectValue(date, event);\n        } // 如果是单击模式，并且是第二次点选，更新值，并关闭面板\n\n\n        if (oneTap && _this.state.doneSelected) {\n          _this.updateValue(event);\n        }\n\n        onSelect && onSelect(date, event);\n      });\n    };\n\n    _this.handleMouseMoveSelectValue = function (date) {\n      var _this$state2 = _this.state,\n          doneSelected = _this$state2.doneSelected,\n          selectValue = _this$state2.selectValue,\n          hoverValue = _this$state2.hoverValue,\n          currentHoverDate = _this$state2.currentHoverDate;\n      var hoverRange = _this.props.hoverRange;\n\n      if (currentHoverDate && isSameDay(date, currentHoverDate)) {\n        return;\n      }\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected && !_isUndefined(hoverRange)) {\n        _this.setState({\n          currentHoverDate: date,\n          hoverValue: nextHoverValue\n        });\n\n        return;\n      } else if (doneSelected) {\n        return;\n      }\n\n      var nextValue = selectValue;\n\n      if (!nextHoverValue.length) {\n        nextValue[1] = date;\n      } else if (hoverValue) {\n        nextValue = [isBefore(nextHoverValue[0], hoverValue[0]) ? nextHoverValue[0] : hoverValue[0], isAfter(nextHoverValue[1], hoverValue[1]) ? nextHoverValue[1] : hoverValue[1], nextValue[2]];\n      } // If `nextValue[0]` is greater than `nextValue[1]` then reverse order\n\n\n      if (isAfter(nextValue[0], nextValue[1])) {\n        nextValue.reverse();\n      }\n\n      _this.setState({\n        currentHoverDate: date,\n        selectValue: nextValue\n      });\n    };\n\n    _this.handleClean = function (event) {\n      _this.setState({\n        calendarDate: getCalendarDate()\n      });\n\n      _this.updateValue(event, []);\n    };\n\n    _this.handleEnter = function () {\n      var value = _this.getValue();\n\n      var calendarDate;\n\n      if (value && value.length) {\n        var startDate = value[0],\n            endData = value[1];\n        calendarDate = [startDate, isSameMonth(startDate, endData) ? addMonths(endData, 1) : endData];\n      } else {\n        calendarDate = getCalendarDate(_this.props.defaultCalendarValue);\n      }\n\n      _this.setState({\n        selectValue: value,\n        calendarDate: calendarDate,\n        active: true\n      });\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props3;\n\n      (_this$props$onOpen = (_this$props3 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props3);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props4;\n\n      _this.setState({\n        active: false,\n        doneSelected: true\n      });\n\n      (_this$props$onClose = (_this$props4 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props4);\n    };\n\n    _this.disabledOkButton = function () {\n      var _this$state3 = _this.state,\n          selectValue = _this$state3.selectValue,\n          doneSelected = _this$state3.doneSelected;\n\n      if (!selectValue[0] || !selectValue[1] || !doneSelected) {\n        return true;\n      }\n\n      return _this.disabledByBetween(selectValue[0], selectValue[1], TYPE.TOOLBAR_BUTTON_OK);\n    };\n\n    _this.disabledShortcutButton = function (value) {\n      if (value === void 0) {\n        value = [];\n      }\n\n      if (!value[0] || !value[1]) {\n        return true;\n      }\n\n      return _this.disabledByBetween(value[0], value[1], TYPE.TOOLBAR_SHORTCUT);\n    };\n\n    _this.handleDisabledDate = function (date, values, type) {\n      var disabledDate = _this.props.disabledDate;\n      var doneSelected = _this.state.doneSelected;\n\n      if (disabledDate) {\n        return disabledDate(date, values, doneSelected, type);\n      }\n\n      return false;\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var defaultValue = props.defaultValue,\n        _value = props.value,\n        defaultCalendarValue = props.defaultCalendarValue;\n    var activeValue = _value || defaultValue || [];\n\n    var _calendarDate = getCalendarDate(_value || defaultCalendarValue);\n\n    _this.state = {\n      value: activeValue,\n      selectValue: activeValue,\n      doneSelected: true,\n      calendarDate: _calendarDate,\n      hoverValue: [],\n      currentHoverDate: null\n    }; // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = DateRangePicker.prototype;\n\n  _proto.getDateString = function getDateString(value) {\n    var _this$props5 = this.props,\n        placeholder = _this$props5.placeholder,\n        formatType = _this$props5.format,\n        renderValue = _this$props5.renderValue;\n    var nextValue = value || this.getValue();\n    var startDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0];\n    var endDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1];\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n      return renderValue ? renderValue(displayValue, formatType) : format(displayValue[0], formatType) + \" ~ \" + format(displayValue[1], formatType);\n    }\n\n    return placeholder || formatType + \" ~ \" + formatType;\n  } // hover range presets\n  ;\n\n  _proto.getHoverRange = function getHoverRange(date) {\n    var hoverRange = this.props.hoverRange;\n\n    if (!hoverRange) {\n      return [];\n    }\n\n    var hoverRangeFunc = hoverRange;\n\n    if (hoverRange === 'week') {\n      hoverRangeFunc = this.getWeekHoverRange;\n    }\n\n    if (hoverRangeFunc === 'month') {\n      hoverRangeFunc = this.getMonthHoverRange;\n    }\n\n    if (typeof hoverRangeFunc !== 'function') {\n      return [];\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return [];\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues.reverse();\n    }\n\n    return hoverValues;\n  };\n\n  _proto.resetPageDate = function resetPageDate() {\n    var selectValue = this.getValue();\n    var calendarDate = getCalendarDate(selectValue);\n    this.setState({\n      selectValue: selectValue,\n      calendarDate: calendarDate\n    });\n  }\n  /**\n   * Toolbar operation callback function\n   */\n  ;\n\n  _proto.updateValue = function updateValue(event, nextSelectValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    }\n\n    var _this$state4 = this.state,\n        value = _this$state4.value,\n        selectValue = _this$state4.selectValue;\n    var onChange = this.props.onChange;\n    var nextValue = !_isUndefined(nextSelectValue) ? nextSelectValue : selectValue;\n    this.setState({\n      selectValue: nextValue || [],\n      value: nextValue\n    });\n\n    if (onChange && (!isSameDay(nextValue[0], value[0]) || !isSameDay(nextValue[1], value[1]))) {\n      onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      this.handleCloseDropdown();\n    }\n  };\n\n  _proto.disabledByBetween = function disabledByBetween(start, end, type) {\n    var disabledDate = this.props.disabledDate;\n    var _this$state5 = this.state,\n        selectValue = _this$state5.selectValue,\n        doneSelected = _this$state5.doneSelected;\n    var selectStartDate = selectValue[0];\n    var selectEndDate = selectValue[1];\n    var nextSelectValue = [selectStartDate, selectEndDate]; // If the date is between the start and the end\n    // the button is disabled\n\n    while (isBefore(start, end) || isSameDay(start, end)) {\n      if (disabledDate === null || disabledDate === void 0 ? void 0 : disabledDate(start, nextSelectValue, doneSelected, type)) {\n        return true;\n      }\n\n      start = addDays(start, 1);\n    }\n\n    return false;\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props6 = this.props,\n        menuClassName = _this$props6.menuClassName,\n        ranges = _this$props6.ranges,\n        isoWeek = _this$props6.isoWeek,\n        limitEndYear = _this$props6.limitEndYear,\n        oneTap = _this$props6.oneTap,\n        showWeekNumbers = _this$props6.showWeekNumbers;\n    var _this$state6 = this.state,\n        calendarDate = _this$state6.calendarDate,\n        selectValue = _this$state6.selectValue,\n        hoverValue = _this$state6.hoverValue,\n        doneSelected = _this$state6.doneSelected;\n    var classes = classNames(this.addPrefix('daterange-menu'), menuClassName);\n    var pickerProps = {\n      isoWeek: isoWeek,\n      doneSelected: doneSelected,\n      hoverValue: hoverValue,\n      calendarDate: calendarDate,\n      limitEndYear: limitEndYear,\n      showWeekNumbers: showWeekNumbers,\n      value: selectValue,\n      disabledDate: this.handleDisabledDate,\n      onSelect: this.handleChangeSelectValue,\n      onMouseMove: this.handleMouseMoveSelectValue,\n      onChangeCalendarDate: this.handleChangeCalendarDate\n    };\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      ref: this.menuContainerRef\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-panel')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-content')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-header')\n    }, this.getDateString(selectValue)), React.createElement(\"div\", {\n      className: this.addPrefix('daterange-calendar-group')\n    }, React.createElement(DatePicker, _extends({\n      index: 0\n    }, pickerProps)), React.createElement(DatePicker, _extends({\n      index: 1\n    }, pickerProps)))), React.createElement(Toolbar, {\n      ranges: ranges,\n      selectValue: selectValue,\n      disabledOkButton: this.disabledOkButton,\n      disabledShortcutButton: this.disabledShortcutButton,\n      onShortcut: this.handleShortcutPageDate,\n      onOk: this.handleOK,\n      hideOkButton: oneTap\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        cleanable = _this$props7.cleanable,\n        locale = _this$props7.locale,\n        toggleComponentClass = _this$props7.toggleComponentClass,\n        style = _this$props7.style,\n        onEntered = _this$props7.onEntered,\n        onEnter = _this$props7.onEnter,\n        onExited = _this$props7.onExited,\n        onClean = _this$props7.onClean,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEntered\", \"onEnter\", \"onExited\", \"onClean\"]);\n\n    var value = this.getValue();\n    var unhandled = getUnhandledProps(DateRangePicker, rest);\n    var hasValue = value && value.length > 1;\n    var classes = getToggleWrapperClassName('daterange', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlProvider, {\n      locale: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExit: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active\n    }), this.getDateString()))));\n  };\n\n  return DateRangePicker;\n}(React.Component);\n\nDateRangePicker.propTypes = {\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  placeholder: PropTypes.node,\n  format: PropTypes.string,\n  disabled: PropTypes.bool,\n  locale: PropTypes.object,\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  cleanable: PropTypes.bool,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  className: PropTypes.string,\n  menuClassName: PropTypes.string,\n  classPrefix: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  style: PropTypes.object,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  preventOverflow: PropTypes.bool,\n  showWeekNumbers: PropTypes.bool,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onClean: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  renderValue: PropTypes.func\n};\nDateRangePicker.defaultProps = {\n  appearance: 'default',\n  placement: 'bottomStart',\n  limitEndYear: 1000,\n  format: 'YYYY-MM-DD',\n  placeholder: '',\n  cleanable: true,\n  locale: {\n    sunday: 'Su',\n    monday: 'Mo',\n    tuesday: 'Tu',\n    wednesday: 'We',\n    thursday: 'Th',\n    friday: 'Fr',\n    saturday: 'Sa',\n    ok: 'OK',\n    today: 'Today',\n    yesterday: 'Yesterday',\n    last7Days: 'Last 7 Days',\n    hours: 'Hours',\n    minutes: 'Minutes',\n    seconds: 'Seconds'\n  }\n};\nvar enhance = compose(defaultProps({\n  classPrefix: 'picker'\n}), withPickerMethods());\nexport default enhance(DateRangePicker);"]},"metadata":{},"sourceType":"module"}